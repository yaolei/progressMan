{"ast":null,"code":"import \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport _objectSpread from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/evan/progressMan/src/components/Form/model/select.js\";\nimport React from 'react';\nimport $$ from 'cmn-utils';\n/**\n * 下拉菜单元件\n */\n\nexport default (function (_ref) {\n  var form = _ref.form,\n      name = _ref.name,\n      _ref$dict = _ref.dict,\n      dict = _ref$dict === void 0 ? [] : _ref$dict,\n      _ref$formFieldOptions = _ref.formFieldOptions,\n      formFieldOptions = _ref$formFieldOptions === void 0 ? {} : _ref$formFieldOptions,\n      record = _ref.record,\n      initialValue = _ref.initialValue,\n      rules = _ref.rules,\n      onChange = _ref.onChange,\n      normalize = _ref.normalize,\n      getPopupContainer = _ref.getPopupContainer,\n      placeholder = _ref.placeholder,\n      preview = _ref.preview,\n      otherProps = _objectWithoutProperties(_ref, [\"form\", \"name\", \"dict\", \"formFieldOptions\", \"record\", \"initialValue\", \"rules\", \"onChange\", \"normalize\", \"getPopupContainer\", \"placeholder\", \"preview\"]);\n\n  var getFieldDecorator = form.getFieldDecorator;\n  var initval = initialValue;\n\n  if (record) {\n    initval = record[name];\n  } // 如果存在初始值\n\n\n  if (initval !== null && typeof initval !== 'undefined') {\n    if ($$.isFunction(normalize)) {\n      formFieldOptions.initialValue = normalize(initval);\n    } else {\n      formFieldOptions.initialValue = initval;\n    }\n  } // 预览视图\n\n\n  if (preview) {\n    var _initval = $$.isArray(initval) ? initval : [initval];\n\n    var dictObj = dict.filter(function (item) {\n      return _initval.indexOf(item.code) !== -1;\n    });\n    var text = '';\n\n    if (dictObj.length) {\n      text = dictObj.map(function (item) {\n        return item.codeName;\n      }).join(',');\n    }\n\n    return React.createElement(\"div\", {\n      style: otherProps.style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, text);\n  } // 如果有rules\n\n\n  if (rules && rules.length) {\n    formFieldOptions.rules = rules;\n  } // 如果需要onChange\n\n\n  if (typeof onChange === 'function') {\n    formFieldOptions.onChange = function (value) {\n      return onChange(form, value);\n    }; // form, value\n\n  }\n\n  var props = _objectSpread({\n    placeholder: placeholder || \"\\u8BF7\\u9009\\u62E9\".concat(otherProps.title)\n  }, otherProps);\n\n  if (getPopupContainer) {\n    props.getPopupContainer = getPopupContainer;\n  }\n\n  return getFieldDecorator(name, formFieldOptions)(React.createElement(_Select, Object.assign({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), dict.map(function (dic, i) {\n    return React.createElement(_Select.Option, {\n      key: dic.code,\n      value: dic.code,\n      title: dic.codeName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, dic.codeName);\n  })));\n});","map":{"version":3,"sources":["/Users/evan/progressMan/src/components/Form/model/select.js"],"names":["React","$$","form","name","dict","formFieldOptions","record","initialValue","rules","onChange","normalize","getPopupContainer","placeholder","preview","otherProps","getFieldDecorator","initval","isFunction","_initval","isArray","dictObj","filter","item","indexOf","code","text","length","map","codeName","join","style","value","props","title","dic","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Select } from 'antd';\nimport $$ from 'cmn-utils';\n/**\n * 下拉菜单元件\n */\nexport default ({\n  form,\n  name,\n  dict = [],\n  formFieldOptions = {},\n  record,\n  initialValue,\n  rules,\n  onChange,\n  normalize,\n  getPopupContainer,\n  placeholder,\n  preview,\n  ...otherProps\n}) => {\n  const { getFieldDecorator } = form;\n\n  let initval = initialValue;\n\n  if (record) {\n    initval = record[name];\n  }\n\n  // 如果存在初始值\n  if (initval !== null && typeof initval !== 'undefined') {\n    if ($$.isFunction(normalize)) {\n      formFieldOptions.initialValue = normalize(initval);\n    } else {\n      formFieldOptions.initialValue = initval;\n    }\n  }\n\n  // 预览视图\n  if (preview) {\n    const _initval = $$.isArray(initval) ? initval : [initval];\n    const dictObj = dict.filter(item => _initval.indexOf(item.code) !== -1);\n    let text = '';\n    if (dictObj.length) {\n      text = dictObj.map(item => item.codeName).join(',');\n    }\n    return <div style={otherProps.style}>{text}</div>;\n  }\n\n  // 如果有rules\n  if (rules && rules.length) {\n    formFieldOptions.rules = rules;\n  }\n\n  // 如果需要onChange\n  if (typeof onChange === 'function') {\n    formFieldOptions.onChange = value => onChange(form, value); // form, value\n  }\n\n  const props = {\n    placeholder: placeholder || `请选择${otherProps.title}`,\n    ...otherProps\n  };\n\n  if (getPopupContainer) {\n    props.getPopupContainer = getPopupContainer;\n  }\n\n  return getFieldDecorator(name, formFieldOptions)(\n    <Select {...props}>\n      {dict.map((dic, i) => (\n        <Select.Option key={dic.code} value={dic.code} title={dic.codeName}>\n          {dic.codeName}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nvar _jsxFileName = \"/Users/evan/progressMan/src/components/Pages/Coming.js\";\nimport './style/coming.less';\nimport React, { Component } from 'react';\nimport moment from 'moment';\nvar Content = _Layout.Content;\n/**\n * 倒计时页面\n * <Coming\n     title=\"精彩即将呈现\"\n     value={Date.now() + 1000 * 60 * 60 * 24 * 2}\n   />\n */\n\nvar Coming =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Coming, _Component);\n\n  function Coming() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Coming);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Coming)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      days: '00',\n      hours: '00',\n      minutes: '00',\n      seconds: '00'\n    };\n    _this.countdownId = null;\n\n    _this.syncTimer = function () {\n      var value = _this.props.value;\n      var timestamp = moment(value).valueOf();\n\n      if (timestamp >= Date.now()) {\n        _this.startTimer();\n      } else {\n        _this.stopTimer();\n      }\n    };\n\n    _this.startTimer = function () {\n      var value = _this.props.value;\n      if (_this.countdownId) return;\n      _this.countdownId = window.setInterval(function () {\n        return _this.parseTime(value);\n      }, 500);\n    };\n\n    _this.stopTimer = function () {\n      clearInterval(_this.countdownId);\n      _this.countdownId = null;\n    };\n\n    _this.parseTime = function (value) {\n      var target = moment(value);\n      var current = moment();\n      var diffTime = Math.max(target - current, 0);\n      var duration = moment.duration(diffTime, 'milliseconds');\n\n      _this.setState({\n        days: formatDoubleStr(duration.days()),\n        hours: formatDoubleStr(duration.hours()),\n        minutes: formatDoubleStr(duration.minutes()),\n        seconds: formatDoubleStr(duration.seconds())\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Coming, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.syncTimer();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.syncTimer();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopTimer();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var title = this.props.title;\n      var _this$state = this.state,\n          days = _this$state.days,\n          hours = _this$state.hours,\n          minutes = _this$state.minutes,\n          seconds = _this$state.seconds;\n      return React.createElement(_Layout, {\n        className: \"full-layout coming-soon-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"place_balk_workers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"balk_workers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"saw\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"balk\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, title), React.createElement(\"div\", {\n        id: \"watch\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dash days_dash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"digit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, days), React.createElement(\"span\", {\n        className: \"dash_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"\\u5929\")), React.createElement(\"div\", {\n        className: \"dash hours_dash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"digit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, hours), React.createElement(\"span\", {\n        className: \"dash_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"\\u65F6\")), React.createElement(\"div\", {\n        className: \"dash minutes_dash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"digit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, minutes), React.createElement(\"span\", {\n        className: \"dash_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"\\u5206\")), React.createElement(\"div\", {\n        className: \"dash seconds_dash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"digit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, seconds), React.createElement(\"span\", {\n        className: \"dash_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"\\u79D2\"))))));\n    }\n  }]);\n\n  return Coming;\n}(Component);\n\nexport default Coming;\n\nfunction formatDoubleStr(number) {\n  return number < 10 ? '0' + number : number;\n}","map":{"version":3,"sources":["/Users/evan/progressMan/src/components/Pages/Coming.js"],"names":["React","Component","moment","Content","Coming","state","days","hours","minutes","seconds","countdownId","syncTimer","value","props","timestamp","valueOf","Date","now","startTimer","stopTimer","window","setInterval","parseTime","clearInterval","target","current","diffTime","Math","max","duration","setState","formatDoubleStr","title","number"],"mappings":"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","sourcesContent":["import './style/coming.less';\nimport React, { Component } from 'react';\nimport { Layout } from 'antd';\nimport moment from 'moment';\nconst { Content } = Layout;\n\n/**\n * 倒计时页面\n * <Coming\n     title=\"精彩即将呈现\"\n     value={Date.now() + 1000 * 60 * 60 * 24 * 2}\n   />\n */\nclass Coming extends Component {\n  state = {\n    days: '00',\n    hours: '00',\n    minutes: '00',\n    seconds: '00'\n  };\n\n  countdownId = null;\n\n  componentDidMount() {\n    this.syncTimer();\n  }\n\n  componentDidUpdate() {\n    this.syncTimer();\n  }\n\n  componentWillUnmount() {\n    this.stopTimer();\n  }\n\n  syncTimer = () => {\n    const { value } = this.props;\n\n    const timestamp = moment(value).valueOf();\n    if (timestamp >= Date.now()) {\n      this.startTimer();\n    } else {\n      this.stopTimer();\n    }\n  };\n\n  startTimer = () => {\n    const { value } = this.props;\n\n    if (this.countdownId) return;\n\n    this.countdownId = window.setInterval(() => this.parseTime(value), 500);\n  };\n\n  stopTimer = () => {\n    clearInterval(this.countdownId);\n    this.countdownId = null;\n  };\n\n  parseTime = value => {\n    const target = moment(value);\n    const current = moment();\n    const diffTime = Math.max(target - current, 0);\n    const duration = moment.duration(diffTime, 'milliseconds');\n\n    this.setState({\n      days: formatDoubleStr(duration.days()),\n      hours: formatDoubleStr(duration.hours()),\n      minutes: formatDoubleStr(duration.minutes()),\n      seconds: formatDoubleStr(duration.seconds())\n    });\n  };\n\n  render() {\n    const { title } = this.props;\n    const { days, hours, minutes, seconds } = this.state;\n    return (\n      <Layout className=\"full-layout coming-soon-page\">\n        <Content>\n          <div id=\"wrapper\">\n            <div className=\"place_balk_workers\">\n              <div className=\"balk_workers\" />\n              <div className=\"saw\" />\n              <div className=\"balk\" />\n            </div>\n            <div className=\"title\">{title}</div>\n            <div id=\"watch\">\n              <div className=\"dash days_dash\">\n                <div className=\"digit\">{days}</div>\n                <span className=\"dash_title\">天</span>\n              </div>\n              <div className=\"dash hours_dash\">\n                <div className=\"digit\">{hours}</div>\n                <span className=\"dash_title\">时</span>\n              </div>\n              <div className=\"dash minutes_dash\">\n                <div className=\"digit\">{minutes}</div>\n                <span className=\"dash_title\">分</span>\n              </div>\n              <div className=\"dash seconds_dash\">\n                <div className=\"digit\">{seconds}</div>\n                <span className=\"dash_title\">秒</span>\n              </div>\n            </div>\n          </div>\n        </Content>\n      </Layout>\n    );\n  }\n}\n\nexport default Coming;\n\nfunction formatDoubleStr(number) {\n  return number < 10 ? '0' + number : number;\n}\n"]},"metadata":{},"sourceType":"module"}
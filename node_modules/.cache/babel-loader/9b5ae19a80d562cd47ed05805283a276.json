{"ast":null,"code":"import _objectSpread from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _dec,\n    _class,\n    _class2,\n    _temp,\n    _jsxFileName = \"/Users/evan/progressMan/src/components/WaterFall/WaterFall.js\";\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Masonry from 'masonry-layout';\nimport cx from 'classnames';\nimport resizeMe from '@/decorator/resizeMe';\nimport isEqual from 'react-fast-compare';\nimport './style/index.less';\n/**\n * 瀑布流组件\n */\n\nvar WaterFall = (_dec = resizeMe({\n  refreshRate: 50\n}), _dec(_class = (_temp = _class2 =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(WaterFall, _PureComponent);\n\n  function WaterFall() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, WaterFall);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WaterFall)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onLayoutComplete = function (items) {\n      var onLayout = _this.props.onLayout;\n      onLayout && onLayout(items, _this.msnry);\n    };\n\n    _this.renderItem = function (dataSource) {\n      var _this$props = _this.props,\n          render = _this$props.render,\n          columnWidth = _this$props.columnWidth,\n          gutter = _this$props.gutter,\n          itemStyle = _this$props.itemStyle;\n      var renderFunc = render ? render : function (item) {\n        return item;\n      };\n      var style = {\n        width: columnWidth\n      };\n\n      if (gutter) {\n        style.marginBottom = gutter;\n      }\n\n      return dataSource.map(function (item, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"antui-waterfall-item\",\n          style: _objectSpread({}, style, itemStyle),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, renderFunc(item, index));\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(WaterFall, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n          columnWidth = _this$props2.columnWidth,\n          gutter = _this$props2.gutter,\n          horizontalOrder = _this$props2.horizontalOrder,\n          percentPosition = _this$props2.percentPosition,\n          fitWidth = _this$props2.fitWidth,\n          getInstance = _this$props2.getInstance;\n      this.msnry = new Masonry(this.node, {\n        itemSelector: '.antui-waterfall-item',\n        columnWidth: typeof columnWidth === 'string' ? '.antui-waterfall-item' : columnWidth,\n        gutter: gutter,\n        horizontalOrder: horizontalOrder,\n        percentPosition: percentPosition,\n        fitWidth: fitWidth\n      });\n      this.msnry.on('layoutComplete', this.onLayoutComplete);\n      if (getInstance) getInstance(this.msnry);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!isEqual(prevProps.size, this.props.size)) {\n        this.msnry.layout();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.msnry.off('layoutComplete', this.onLayoutComplete);\n      this.msnry.destroy();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          prefixCls = _this$props3.prefixCls,\n          className = _this$props3.className,\n          dataSource = _this$props3.dataSource,\n          style = _this$props3.style;\n      var classnames = cx(prefixCls, className);\n      return React.createElement(\"div\", {\n        ref: function ref(node) {\n          return _this2.node = node;\n        },\n        className: classnames,\n        style: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, this.renderItem(dataSource));\n    }\n  }]);\n\n  return WaterFall;\n}(PureComponent), _class2.propTypes = {\n  dataSource: PropTypes.array,\n  columnWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  gutter: PropTypes.number,\n  horizontalOrder: PropTypes.bool,\n  percentPosition: PropTypes.bool,\n  fitWidth: PropTypes.bool\n}, _class2.defaultProps = {\n  prefixCls: 'antui-waterfall'\n}, _temp)) || _class);\nexport default WaterFall;","map":{"version":3,"sources":["/Users/evan/progressMan/src/components/WaterFall/WaterFall.js"],"names":["React","PureComponent","PropTypes","Masonry","cx","resizeMe","isEqual","WaterFall","refreshRate","onLayoutComplete","items","onLayout","props","msnry","renderItem","dataSource","render","columnWidth","gutter","itemStyle","renderFunc","item","style","width","marginBottom","map","index","horizontalOrder","percentPosition","fitWidth","getInstance","node","itemSelector","on","prevProps","prevState","size","layout","off","destroy","prefixCls","className","classnames","propTypes","array","oneOfType","string","number","bool","defaultProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Masonry from 'masonry-layout';\nimport cx from 'classnames';\nimport resizeMe from '@/decorator/resizeMe';\nimport isEqual from 'react-fast-compare';\nimport './style/index.less';\n\n/**\n * 瀑布流组件\n */\n@resizeMe({ refreshRate: 50 })\nclass WaterFall extends PureComponent {\n  static propTypes = {\n    dataSource: PropTypes.array,\n    columnWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    gutter: PropTypes.number,\n    horizontalOrder: PropTypes.bool,\n    percentPosition: PropTypes.bool,\n    fitWidth: PropTypes.bool\n  };\n  static defaultProps = {\n    prefixCls: 'antui-waterfall'\n  };\n\n  componentDidMount() {\n    const {\n      columnWidth,\n      gutter,\n      horizontalOrder,\n      percentPosition,\n      fitWidth,\n      getInstance\n    } = this.props;\n\n    this.msnry = new Masonry(this.node, {\n      itemSelector: '.antui-waterfall-item',\n      columnWidth:\n        typeof columnWidth === 'string' ? '.antui-waterfall-item' : columnWidth,\n      gutter,\n      horizontalOrder,\n      percentPosition,\n      fitWidth\n    });\n\n    this.msnry.on('layoutComplete', this.onLayoutComplete);\n\n    if (getInstance) getInstance(this.msnry);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (!isEqual(prevProps.size, this.props.size)) {\n      this.msnry.layout();\n    }\n  }\n\n  componentWillUnmount() {\n    this.msnry.off('layoutComplete', this.onLayoutComplete);\n    this.msnry.destroy();\n  }\n\n  onLayoutComplete = items => {\n    const { onLayout } = this.props;\n    onLayout && onLayout(items, this.msnry);\n  }\n\n  renderItem = dataSource => {\n    const { render, columnWidth, gutter, itemStyle } = this.props;\n    const renderFunc = render ? render : item => item;\n\n    const style = {\n      width: columnWidth\n    };\n    if (gutter) {\n      style.marginBottom = gutter;\n    }\n\n    return dataSource.map((item, index) => {\n      return (\n        <div\n          key={index}\n          className=\"antui-waterfall-item\"\n          style={{ ...style, ...itemStyle }}\n        >\n          {renderFunc(item, index)}\n        </div>\n      );\n    });\n  };\n\n  render() {\n    const { prefixCls, className, dataSource, style } = this.props;\n    const classnames = cx(prefixCls, className);\n    return (\n      <div\n        ref={node => (this.node = node)}\n        className={classnames}\n        style={style}\n      >\n        {this.renderItem(dataSource)}\n      </div>\n    );\n  }\n}\n\nexport default WaterFall;\n"]},"metadata":{},"sourceType":"module"}
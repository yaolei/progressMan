{"ast":null,"code":"import \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport _objectSpread from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/evan/progressMan/src/components/Upload/Upload.js\";\nimport React from 'react';\nimport $$ from 'cmn-utils';\nimport config from '@/config'; // 从全局配置里获取参数\n\nvar request = config.request || {};\n/**\n * 使Upload可以走全局代理，并可携带全局头部信息\n */\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(_default, _React$PureComponent);\n\n  function _default() {\n    _classCallCheck(this, _default);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(_default).apply(this, arguments));\n  }\n\n  _createClass(_default, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          headers = _this$props.headers,\n          action = _this$props.action,\n          otherProps = _objectWithoutProperties(_this$props, [\"headers\", \"action\"]);\n\n      var newheaders = _objectSpread({}, headers);\n\n      var uploadProps = _objectSpread({}, otherProps);\n\n      if (request && request.withHeaders) {\n        if ($$.isFunction(request.withHeaders)) {\n          newheaders = _objectSpread({}, request.withHeaders(), newheaders);\n        } else if ($$.isObject(request.withHeaders)) {\n          newheaders = _objectSpread({}, request.withHeaders, newheaders);\n        }\n\n        uploadProps.headers = newheaders;\n      }\n\n      var nextURL = (request.prefix || '') + action;\n\n      if (/^(http|https|ftp):\\/\\//.test(action)) {\n        nextURL = action;\n      }\n\n      if (action) {\n        uploadProps.action = nextURL;\n      }\n\n      return React.createElement(_Upload, Object.assign({}, uploadProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return _default;\n}(React.PureComponent);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/evan/progressMan/src/components/Upload/Upload.js"],"names":["React","$$","config","request","props","headers","action","otherProps","newheaders","uploadProps","withHeaders","isFunction","isObject","nextURL","prefix","test","PureComponent"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,EAAP,MAAe,WAAf;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CACA;;AACA,IAAMC,OAAO,GAAGD,MAAM,CAACC,OAAP,IAAkB,EAAlC;AAEA;;;;;;;;;;;;;;;;;6BAIW;AAAA,wBACoC,KAAKC,KADzC;AAAA,UACCC,OADD,eACCA,OADD;AAAA,UACUC,MADV,eACUA,MADV;AAAA,UACqBC,UADrB;;AAGP,UAAIC,UAAU,qBAAQH,OAAR,CAAd;;AAEA,UAAMI,WAAW,qBAAQF,UAAR,CAAjB;;AAEA,UAAIJ,OAAO,IAAIA,OAAO,CAACO,WAAvB,EAAoC;AAClC,YAAIT,EAAE,CAACU,UAAH,CAAcR,OAAO,CAACO,WAAtB,CAAJ,EAAwC;AACtCF,UAAAA,UAAU,qBAAQL,OAAO,CAACO,WAAR,EAAR,EAAkCF,UAAlC,CAAV;AACD,SAFD,MAEO,IAAIP,EAAE,CAACW,QAAH,CAAYT,OAAO,CAACO,WAApB,CAAJ,EAAsC;AAC3CF,UAAAA,UAAU,qBAAQL,OAAO,CAACO,WAAhB,EAAgCF,UAAhC,CAAV;AACD;;AACDC,QAAAA,WAAW,CAACJ,OAAZ,GAAsBG,UAAtB;AACD;;AAED,UAAIK,OAAO,GAAG,CAACV,OAAO,CAACW,MAAR,IAAkB,EAAnB,IAAyBR,MAAvC;;AACA,UAAI,yBAAyBS,IAAzB,CAA8BT,MAA9B,CAAJ,EAA2C;AACzCO,QAAAA,OAAO,GAAGP,MAAV;AACD;;AAED,UAAIA,MAAJ,EAAY;AACVG,QAAAA,WAAW,CAACH,MAAZ,GAAqBO,OAArB;AACD;;AAED,aAAO,+CAAYJ,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACD;;;;EA3B0BT,KAAK,CAACgB,a","sourcesContent":["import React from 'react';\nimport { Upload } from 'antd';\nimport $$ from 'cmn-utils';\nimport config from '@/config';\n// 从全局配置里获取参数\nconst request = config.request || {};\n\n/**\n * 使Upload可以走全局代理，并可携带全局头部信息\n */\nexport default class extends React.PureComponent {\n  render() {\n    const { headers, action, ...otherProps } = this.props;\n\n    let newheaders = { ...headers };\n\n    const uploadProps = { ...otherProps };\n\n    if (request && request.withHeaders) {\n      if ($$.isFunction(request.withHeaders)) {\n        newheaders = { ...request.withHeaders(), ...newheaders };\n      } else if ($$.isObject(request.withHeaders)) {\n        newheaders = { ...request.withHeaders, ...newheaders };\n      }\n      uploadProps.headers = newheaders;\n    }\n\n    let nextURL = (request.prefix || '') + action;\n    if (/^(http|https|ftp):\\/\\//.test(action)) {\n      nextURL = action;\n    }\n\n    if (action) {\n      uploadProps.action = nextURL;\n    }\n\n    return <Upload {...uploadProps} />;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
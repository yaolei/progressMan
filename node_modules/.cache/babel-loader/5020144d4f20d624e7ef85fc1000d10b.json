{"ast":null,"code":"import _classCallCheck from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/evan/progressMan/src/components/Mask/index.js\";\nimport './style/index.less';\nimport React, { PureComponent } from 'react';\nimport ReactDOM from 'react-dom';\nimport cssAnimate, { isCssAnimationSupported } from 'css-animation';\nimport cx from 'classnames';\nimport Icon from '../Icon';\nimport $$ from 'cmn-utils';\n\nvar noop = function noop() {};\n\nvar Mask =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Mask, _PureComponent);\n\n  function Mask() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Mask);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Mask)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.toggle = function (visible) {\n      var node = _this.node;\n      if (!node) return;\n      if (visible) node.style.display = 'block';\n\n      if (isCssAnimationSupported) {\n        cssAnimate(node, \"fade\".concat(visible ? 'In' : 'Out'), function (_) {\n          node.style.display = visible ? 'block' : 'none';\n        });\n      } else {\n        node.style.display = visible ? 'block' : 'none';\n      }\n    };\n\n    _this.onClick = function (e) {\n      var _this$props = _this.props,\n          onClose = _this$props.onClose,\n          prefixCls = _this$props.prefixCls;\n\n      if ((e.target.classList.contains(prefixCls) || e.target.classList.contains(prefixCls + '-close')) && onClose) {\n        onClose(e);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Mask, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n          visible = _this$props2.visible,\n          getContainer = _this$props2.getContainer;\n      this.container = document.createElement('div');\n\n      if ($$.isFunction(getContainer)) {\n        var mountNode = getContainer(ReactDOM.findDOMNode(this));\n        mountNode.appendChild(this.container);\n      } else {\n        document.body.appendChild(this.container);\n      }\n\n      this.toggle(visible);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var visible = this.props.visible;\n      this.toggle(visible);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.container.parentNode.removeChild(this.container);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          children = _this$props3.children,\n          className = _this$props3.className,\n          prefixCls = _this$props3.prefixCls,\n          closable = _this$props3.closable,\n          maskClosable = _this$props3.maskClosable;\n\n      if (this.container) {\n        return ReactDOM.createPortal(React.createElement(\"div\", {\n          ref: function ref(node) {\n            return _this2.node = node;\n          },\n          className: cx(prefixCls, 'animated', 'animated-short', className),\n          onClick: maskClosable ? this.onClick : noop,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, closable ? React.createElement(Icon, {\n          className: \"\".concat(prefixCls, \"-close\"),\n          type: \"close\",\n          onClick: this.onClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }) : null, children), this.container);\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Mask;\n}(PureComponent);\n\nMask.defaultProps = {\n  prefixCls: 'basic-mask',\n  maskClosable: true\n};\nexport default Mask;","map":{"version":3,"sources":["/Users/evan/progressMan/src/components/Mask/index.js"],"names":["React","PureComponent","ReactDOM","cssAnimate","isCssAnimationSupported","cx","Icon","$$","noop","Mask","toggle","visible","node","style","display","_","onClick","e","props","onClose","prefixCls","target","classList","contains","getContainer","container","document","createElement","isFunction","mountNode","findDOMNode","appendChild","body","prevProps","prevState","parentNode","removeChild","children","className","closable","maskClosable","createPortal","defaultProps"],"mappings":"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","sourcesContent":["import './style/index.less';\nimport React, { PureComponent } from 'react';\nimport ReactDOM from 'react-dom';\nimport cssAnimate, { isCssAnimationSupported } from 'css-animation';\nimport cx from 'classnames';\nimport Icon from '../Icon';\nimport $$ from 'cmn-utils';\n\nconst noop = () => {};\n\nclass Mask extends PureComponent {\n  static defaultProps = {\n    prefixCls: 'basic-mask',\n    maskClosable: true\n  };\n\n  componentDidMount() {\n    const { visible, getContainer } = this.props;\n    this.container = document.createElement('div');\n    if ($$.isFunction(getContainer)) {\n      const mountNode = getContainer(ReactDOM.findDOMNode(this));\n      mountNode.appendChild(this.container);\n    } else {\n      document.body.appendChild(this.container);\n    }\n    this.toggle(visible);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { visible } = this.props;\n    this.toggle(visible);\n  }\n\n  componentWillUnmount() {\n    this.container.parentNode.removeChild(this.container);\n  }\n\n  toggle = visible => {\n    const node = this.node;\n    if (!node) return;\n    if (visible) node.style.display = 'block';\n\n    if (isCssAnimationSupported) {\n      cssAnimate(node, `fade${visible ? 'In' : 'Out'}`, _ => {\n        node.style.display = visible ? 'block' : 'none';\n      });\n    } else {\n      node.style.display = visible ? 'block' : 'none';\n    }\n  };\n\n  onClick = e => {\n    const { onClose, prefixCls } = this.props;\n\n    if (\n      (e.target.classList.contains(prefixCls) ||\n        e.target.classList.contains(prefixCls + '-close')) &&\n      onClose\n    ) {\n      onClose(e);\n    }\n  };\n\n  render() {\n    const {\n      children,\n      className,\n      prefixCls,\n      closable,\n      maskClosable\n    } = this.props;\n\n    if (this.container) {\n      return ReactDOM.createPortal(\n        <div\n          ref={node => this.node = node}\n          className={cx(prefixCls, 'animated', 'animated-short', className)}\n          onClick={maskClosable ? this.onClick : noop}\n        >\n          {closable ? (\n            <Icon\n              className={`${prefixCls}-close`}\n              type=\"close\"\n              onClick={this.onClick}\n            />\n          ) : null}\n          {children}\n        </div>,\n        this.container\n      );\n    }\n\n    return <div></div>;\n  }\n}\n\nexport default Mask;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport _objectSpread from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/evan/progressMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport \"antd/lib/tree/style\";\nimport _Tree from \"antd/lib/tree\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\n\nvar _dec,\n    _class2,\n    _temp,\n    _jsxFileName = \"/Users/evan/progressMan/src/routes/Widgets/DataTable/components/index.js\";\n\nimport React from 'react';\nimport { connect } from 'dva';\nimport { Link } from 'dva/router';\nimport BaseComponent from 'components/BaseComponent';\nimport Panel from 'components/Panel';\nimport SideLayout from 'components/SideLayout';\nimport DataTable, { Editable } from 'components/DataTable';\nimport { columns1, columns2, columns3, columns4, columns5 } from './columns';\nimport './index.less';\nvar Content = _Layout.Content;\nvar Pagination = DataTable.Pagination;\nvar TreeNode = _Tree.TreeNode;\n\nvar _class = (_dec = connect(function (_ref) {\n  var datatable = _ref.datatable,\n      loading = _ref.loading;\n  return {\n    datatable: datatable,\n    loading: loading.models.datatable\n  };\n}), _dec(_class2 = (_temp =\n/*#__PURE__*/\nfunction (_BaseComponent) {\n  _inherits(_class2, _BaseComponent);\n\n  function _class2() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, _class2);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_class2)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      editingKey: null\n    };\n\n    _this.renderTreeNodes = function (data) {\n      return data.map(function (item) {\n        if (item.children) {\n          return React.createElement(TreeNode, {\n            title: item.title,\n            key: item.key,\n            dataRef: item,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }, _this.renderTreeNodes(item.children));\n        }\n\n        return React.createElement(TreeNode, Object.assign({}, item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }));\n      });\n    };\n\n    _this.onSelectTreeNode = function (selectedKeys, info) {\n      console.log('onSelect', selectedKeys); // 模拟请求\n\n      var _this$props = _this.props,\n          dispatch = _this$props.dispatch,\n          datatable = _this$props.datatable;\n      var pageData = datatable.pageData;\n      dispatch({\n        type: 'datatable/@request',\n        payload: {\n          valueField: 'pageData',\n          url: '/datatable/getList',\n          pageInfo: pageData.startPage(1, 10)\n        }\n      });\n    };\n\n    _this.onEdit = function (record) {\n      _this.setState({\n        editingKey: record.id\n      });\n    };\n\n    _this.onCancelEdit = function () {\n      _this.setState({\n        editingKey: null\n      });\n    };\n\n    _this.onSave = function (record, form) {\n      form.validateFields(function (err, values) {\n        if (!err) {\n          console.log('save:', values, record); // 演示模拟改变数据\n\n          var dataList = _this.props.datatable.dataList;\n          dataList.list = dataList.list.map(function (item) {\n            if (item.id === record.id) {\n              return _objectSpread({}, item, values);\n            } else {\n              return item;\n            }\n          });\n\n          _this.props.dispatch({\n            type: 'datatable/@change',\n            payload: {\n              dataList: dataList\n            }\n          });\n\n          _this.onCancelEdit();\n        } else {\n          console.log(err);\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(_class2, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n          dispatch = _this$props2.dispatch,\n          datatable = _this$props2.datatable;\n      var pageData = datatable.pageData,\n          pageDataSort = datatable.pageDataSort;\n      dispatch({\n        type: 'datatable/@request',\n        payload: {\n          valueField: 'pageData',\n          url: '/datatable/getList',\n          pageInfo: pageData.startPage(1, 10)\n        }\n      });\n      dispatch({\n        type: 'datatable/@request',\n        afterResponse: function afterResponse(resp) {\n          return resp.data;\n        },\n        payload: {\n          valueField: 'deptTreeData',\n          url: '/tree/getDept'\n        }\n      });\n      dispatch({\n        type: 'datatable/@request',\n        afterResponse: function afterResponse(resp) {\n          return resp.data;\n        },\n        payload: {\n          valueField: 'dataList',\n          url: '/datatable/frontPaging'\n        }\n      });\n      dispatch({\n        type: 'datatable/@request',\n        payload: {\n          valueField: 'pageDataSort',\n          url: '/datatable/getList',\n          pageInfo: pageDataSort.startPage(1, 10)\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          datatable = _this$props3.datatable,\n          loading = _this$props3.loading;\n      var pageData = datatable.pageData,\n          deptTreeData = datatable.deptTreeData,\n          dataList = datatable.dataList,\n          pageDataSort = datatable.pageDataSort;\n      var dataTableProps1 = {\n        loading: loading,\n        columns: columns1,\n        rowKey: 'id',\n        dataItems: pageData,\n        onChange: function onChange(_ref2) {\n          var pageNum = _ref2.pageNum,\n              pageSize = _ref2.pageSize;\n        }\n      };\n      var dataTableProps2 = {\n        loading: loading,\n        columns: columns1,\n        rowKey: 'id',\n        dataItems: pageData,\n        selectType: 'checkbox',\n        showNum: true,\n        isScroll: true\n      };\n      var dataTableProps3 = {\n        loading: loading,\n        columns: columns2,\n        rowKey: 'id',\n        dataItems: pageData,\n        isScroll: true\n      };\n      var dataTableProps4 = {\n        loading: loading,\n        columns: columns3,\n        rowKey: 'id',\n        selectType: 'radio',\n        dataItems: pageData,\n        showNum: true\n      };\n      var dataTableProps5 = {\n        loading: loading,\n        columns: columns1,\n        rowKey: 'id',\n        dataItems: dataList,\n        showNum: true\n      };\n      var dataTableProps6 = {\n        loading: loading,\n        columns: columns4,\n        rowKey: 'id',\n        dataItems: pageDataSort,\n        onChange: function onChange(_ref3) {\n          var pageNum = _ref3.pageNum,\n              pageSize = _ref3.pageSize,\n              sorter = _ref3.sorter;\n\n          _this2.props.dispatch({\n            type: 'datatable/@request',\n            payload: {\n              valueField: 'pageDataSort',\n              url: '/datatable/getList',\n              pageInfo: pageDataSort.sortBy(sorter).jumpPage(pageNum, pageSize)\n            }\n          });\n        },\n        isScroll: true\n      };\n      var dataTableProps7 = {\n        loading: loading,\n        columns: columns5(this, this.state.editingKey),\n        rowKey: 'id',\n        dataItems: dataList,\n        showNum: true\n      };\n      return React.createElement(_Layout, {\n        className: \"full-layout page datatable-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u8BF4\\u660E\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"DataTable \\u7528\\u6CD5\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"DataTable\\u901A\\u5E38\\u7ED3\\u5408\", React.createElement(Link, {\n        to: \"/column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Columns\"), \"\\u6765\\u4F7F\\u7528\\uFF0C\\u7531Columns\\u5B9A\\u4E49\\u5176\\u6570\\u636E\\u7ED3\\u6784\\uFF0C\\u652F\\u6301\\u591A\\u79CD\\u7C7B\\u578B\\u6570\\u636E\\uFF0C\\u6269\\u5C55\\u81EAantd\\u7684Table\\u7EC4\\u4EF6\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528Table\\u7684api\\u3002\")), React.createElement(_Row, {\n        gutter: 20,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(_Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u57FA\\u672C\\u7528\\u6CD5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({}, dataTableProps1, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      })))), React.createElement(_Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u5185\\u90E8\\u5206\\u9875\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({\n        pagination: true\n      }, dataTableProps1, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }))))), React.createElement(Panel, {\n        title: \"\\u5916\\u90E8\\u5206\\u9875\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({}, dataTableProps1, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(Pagination, Object.assign({}, dataTableProps1, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })))), React.createElement(_Row, {\n        gutter: 20,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(_Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u884C\\u53F7,\\u521D\\u59CB\\u503C\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({}, dataTableProps2, {\n        selectedRowKeys: [1, 2, 4],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      })))), React.createElement(_Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u5217\\u63D0\\u793A&\\u5BBD\\u5EA6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({}, dataTableProps3, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }))))), React.createElement(_Row, {\n        gutter: 20,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(_Col, {\n        span: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u6570\\u636E\\u5B57\\u5178&\\u5355\\u9009\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({}, dataTableProps4, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      })))), React.createElement(_Col, {\n        span: 18,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u5DE6\\u4FA7\\u6811\\u8054\\u52A8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(SideLayout, {\n        title: \"\\u7EC4\\u7EC7\\u673A\\u6784\",\n        sideContent: React.createElement(_Tree, {\n          onSelect: this.onSelectTreeNode,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        }, this.renderTreeNodes(deptTreeData)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({}, dataTableProps1, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      })))))), React.createElement(_Row, {\n        gutter: 20,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(_Col, {\n        span: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u524D\\u53F0\\u5206\\u9875\",\n        height: 500,\n        scroll: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({\n        pagination: {\n          pageSize: 20\n        }\n      }, dataTableProps5, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      })))), React.createElement(_Col, {\n        span: 14,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u6392\\u5E8F\",\n        height: 500,\n        scroll: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(DataTable, Object.assign({}, dataTableProps6, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(Pagination, Object.assign({}, dataTableProps6, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      })))))), React.createElement(_Row, {\n        gutter: 20,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(_Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"\\u53EF\\u7F16\\u8F91\\u7684\\u884C\\uFF0C\\u7528\\u6CD5\\u4E0EForm\\u76F8\\u4F3C\",\n        height: 500,\n        scroll: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(Editable, Object.assign({\n        pagination: {\n          pageSize: 20\n        }\n      }, dataTableProps7, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return _class2;\n}(BaseComponent), _temp)) || _class2);\n\nexport { _class as default };","map":{"version":3,"sources":["/Users/evan/progressMan/src/routes/Widgets/DataTable/components/index.js"],"names":["React","connect","Link","BaseComponent","Panel","SideLayout","DataTable","Editable","columns1","columns2","columns3","columns4","columns5","Content","Pagination","TreeNode","datatable","loading","models","state","editingKey","renderTreeNodes","data","map","item","children","title","key","onSelectTreeNode","selectedKeys","info","console","log","props","dispatch","pageData","type","payload","valueField","url","pageInfo","startPage","onEdit","record","setState","id","onCancelEdit","onSave","form","validateFields","err","values","dataList","list","pageDataSort","afterResponse","resp","deptTreeData","dataTableProps1","columns","rowKey","dataItems","onChange","pageNum","pageSize","dataTableProps2","selectType","showNum","isScroll","dataTableProps3","dataTableProps4","dataTableProps5","dataTableProps6","sorter","sortBy","jumpPage","dataTableProps7"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'dva';\nimport { Link } from 'dva/router';\nimport { Layout, Row, Col, Tree } from 'antd';\nimport BaseComponent from 'components/BaseComponent';\nimport Panel from 'components/Panel';\nimport SideLayout from 'components/SideLayout';\nimport DataTable, { Editable } from 'components/DataTable';\nimport { columns1, columns2, columns3, columns4, columns5 } from './columns';\nimport './index.less';\nconst { Content } = Layout;\nconst Pagination = DataTable.Pagination;\nconst TreeNode = Tree.TreeNode;\n\n@connect(({ datatable, loading }) => ({\n  datatable,\n  loading: loading.models.datatable\n}))\nexport default class extends BaseComponent {\n  state = {\n    editingKey: null\n  };\n\n  componentDidMount() {\n    const { dispatch, datatable } = this.props;\n    const { pageData, pageDataSort } = datatable;\n\n    dispatch({\n      type: 'datatable/@request',\n      payload: {\n        valueField: 'pageData',\n        url: '/datatable/getList',\n        pageInfo: pageData.startPage(1, 10)\n      }\n    });\n\n    dispatch({\n      type: 'datatable/@request',\n      afterResponse: resp => resp.data,\n      payload: {\n        valueField: 'deptTreeData',\n        url: '/tree/getDept'\n      }\n    });\n\n    dispatch({\n      type: 'datatable/@request',\n      afterResponse: resp => resp.data,\n      payload: {\n        valueField: 'dataList',\n        url: '/datatable/frontPaging'\n      }\n    });\n\n    dispatch({\n      type: 'datatable/@request',\n      payload: {\n        valueField: 'pageDataSort',\n        url: '/datatable/getList',\n        pageInfo: pageDataSort.startPage(1, 10)\n      }\n    });\n  }\n\n  renderTreeNodes = data => {\n    return data.map(item => {\n      if (item.children) {\n        return (\n          <TreeNode title={item.title} key={item.key} dataRef={item}>\n            {this.renderTreeNodes(item.children)}\n          </TreeNode>\n        );\n      }\n      return <TreeNode {...item} />;\n    });\n  };\n\n  onSelectTreeNode = (selectedKeys, info) => {\n    console.log('onSelect', selectedKeys);\n\n    // 模拟请求\n    const { dispatch, datatable } = this.props;\n    const { pageData } = datatable;\n    dispatch({\n      type: 'datatable/@request',\n      payload: {\n        valueField: 'pageData',\n        url: '/datatable/getList',\n        pageInfo: pageData.startPage(1, 10)\n      }\n    });\n  };\n\n  onEdit = record => {\n    this.setState({\n      editingKey: record.id\n    });\n  };\n\n  onCancelEdit = () => {\n    this.setState({ editingKey: null });\n  };\n\n  onSave = (record, form) => {\n    form.validateFields((err, values) => {\n      if (!err) {\n        console.log('save:', values, record);\n        // 演示模拟改变数据\n        const { dataList } = this.props.datatable;\n        dataList.list = dataList.list.map(item => {\n          if (item.id === record.id) {\n            return { ...item, ...values };\n          } else {\n            return item;\n          }\n        });\n        this.props.dispatch({\n          type: 'datatable/@change',\n          payload: {\n            dataList\n          }\n        });\n        this.onCancelEdit();\n      } else {\n        console.log(err);\n      }\n    });\n  };\n\n  render() {\n    const { datatable, loading } = this.props;\n    const { pageData, deptTreeData, dataList, pageDataSort } = datatable;\n    const dataTableProps1 = {\n      loading,\n      columns: columns1,\n      rowKey: 'id',\n      dataItems: pageData,\n      onChange: ({ pageNum, pageSize }) => {}\n    };\n\n    const dataTableProps2 = {\n      loading,\n      columns: columns1,\n      rowKey: 'id',\n      dataItems: pageData,\n      selectType: 'checkbox',\n      showNum: true,\n      isScroll: true\n    };\n\n    const dataTableProps3 = {\n      loading,\n      columns: columns2,\n      rowKey: 'id',\n      dataItems: pageData,\n      isScroll: true\n    };\n\n    const dataTableProps4 = {\n      loading,\n      columns: columns3,\n      rowKey: 'id',\n      selectType: 'radio',\n      dataItems: pageData,\n      showNum: true\n    };\n\n    const dataTableProps5 = {\n      loading,\n      columns: columns1,\n      rowKey: 'id',\n      dataItems: dataList,\n      showNum: true\n    };\n\n    const dataTableProps6 = {\n      loading,\n      columns: columns4,\n      rowKey: 'id',\n      dataItems: pageDataSort,\n      onChange: ({ pageNum, pageSize, sorter }) => {\n        this.props.dispatch({\n          type: 'datatable/@request',\n          payload: {\n            valueField: 'pageDataSort',\n            url: '/datatable/getList',\n            pageInfo: pageDataSort.sortBy(sorter).jumpPage(pageNum, pageSize)\n          }\n        });\n      },\n      isScroll: true\n    };\n\n    const dataTableProps7 = {\n      loading,\n      columns: columns5(this, this.state.editingKey),\n      rowKey: 'id',\n      dataItems: dataList,\n      showNum: true\n    };\n\n    return (\n      <Layout className=\"full-layout page datatable-page\">\n        <Content>\n          <Panel title=\"说明\">\n            <h3>DataTable 用法</h3>\n            <p>\n              DataTable通常结合<Link to=\"/column\">Columns</Link>\n              来使用，由Columns定义其数据结构，支持多种类型数据，扩展自antd的Table组件，可以使用Table的api。\n            </p>\n          </Panel>\n          <Row gutter={20}>\n            <Col span={12}>\n              <Panel title=\"基本用法\">\n                <DataTable {...dataTableProps1} />\n              </Panel>\n            </Col>\n            <Col span={12}>\n              <Panel title=\"内部分页\">\n                <DataTable pagination {...dataTableProps1} />\n              </Panel>\n            </Col>\n          </Row>\n          <Panel title=\"外部分页\">\n            <DataTable {...dataTableProps1} />\n            <div className=\"footer\">\n              <Pagination {...dataTableProps1} />\n            </div>\n          </Panel>\n          <Row gutter={20}>\n            <Col span={12}>\n              <Panel title=\"行号,初始值\">\n                <DataTable {...dataTableProps2} selectedRowKeys={[1, 2, 4]} />\n              </Panel>\n            </Col>\n            <Col span={12}>\n              <Panel title=\"列提示&宽度\">\n                <DataTable {...dataTableProps3} />\n              </Panel>\n            </Col>\n          </Row>\n          <Row gutter={20}>\n            <Col span={6}>\n              <Panel title=\"数据字典&单选\">\n                <DataTable {...dataTableProps4} />\n              </Panel>\n            </Col>\n            <Col span={18}>\n              <Panel title=\"左侧树联动\">\n                <SideLayout\n                  title=\"组织机构\"\n                  sideContent={\n                    <Tree onSelect={this.onSelectTreeNode}>\n                      {this.renderTreeNodes(deptTreeData)}\n                    </Tree>\n                  }\n                >\n                  <DataTable {...dataTableProps1} />\n                </SideLayout>\n              </Panel>\n            </Col>\n          </Row>\n          <Row gutter={20}>\n            <Col span={10}>\n              <Panel title=\"前台分页\" height={500} scroll>\n                <DataTable pagination={{ pageSize: 20 }} {...dataTableProps5} />\n              </Panel>\n            </Col>\n            <Col span={14}>\n              <Panel title=\"排序\" height={500} scroll>\n                <DataTable {...dataTableProps6} />\n                <div className=\"footer\">\n                  <Pagination {...dataTableProps6} />\n                </div>\n              </Panel>\n            </Col>\n          </Row>\n          <Row gutter={20}>\n            <Col span={12}>\n              <Panel title=\"可编辑的行，用法与Form相似\" height={500} scroll>\n                <Editable pagination={{ pageSize: 20 }} {...dataTableProps7} />\n              </Panel>\n            </Col>\n          </Row>\n        </Content>\n      </Layout>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}